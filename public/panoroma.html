<html>
<head>
  <title>Google map streetview data center</title>
 
</head>
<body>

    <canvas id="myCanvas"></canvas>
    <img id="pano">

    <script>
    var base64;
    var id = 'W956noQFxUP1cJH0-uYkKA';
    var zoom = 3;
    var w = 416 * Math.pow(2, zoom),
       h = (416 * Math.pow(2, zoom - 1));
       
    var canvas = document.getElementById("myCanvas");
    canvas.width = w;
    canvas.height = h;
    var ctx = canvas.getContext("2d");

    var w,
           h = Math.pow(2, zoom - 1),
           url,
           x,
           y;

       switch (zoom) {
       case 5:
             w = 26;
             h = 13;
             break;
       case 4:
             w = 13;
             h = 7;
             break;
       case 3:
             w = 7;
             break;
       default:
             w = Math.pow(2, zoom);
       }

       // Get the tiles
       for (y = 0; y < h; y++) {
             for (x = 0; x < w; x++) {
                createImage(id, x, y, zoom);
             }
       }
       
       base64 = canvas.toDataURL();
       console.log(base64);

    function createImage(id, x, y, zoom) {
        var GSVPANO_url = 'http://140.118.155.49:9999/api/gmsdata';
        //var url = GSVPANO_url + '/pano_id=' + id + '&zoom=' + zoom + '&x=' + x + '&y=' + y;
        var url = 'http://maps.google.com/cbk?output=tile&panoid=' + id + '&zoom=' + zoom + '&x=' + x + '&y=' + y;

        var img = new Image();
        img.addEventListener("load", function () {
          ctx.drawImage(img, x * 512, y * 512);
          img.removeEventListener("load", false);
        });
        img.crossOrigin = '';
        img.src = url;
    }

    </script>
</body>
</html>